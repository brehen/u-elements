<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>u-elements</title>
  <link rel="stylesheet" href="./highlight-light.css" media="(prefers-color-scheme: light)" />
  <link rel="stylesheet" href="./highlight-dark.css" media="(prefers-color-scheme: dark)" />
  <script type="module" src="../dist/index.js"></script>
  <style>
    :root { color-scheme: light dark }
    body{ margin: 0 auto; max-width: 40em; padding: 0 .62em 3.24em; font: 1.2em/1.62 sans-serif }
    h1,h2,h3 { line-height: 1.2 }
    
    .markdown { white-space: pre }
    .demo, pre > code { border-radius: .5rem }
  </style>
</head>
<body>
  <h1>u-elements</h1>
  <main>
    <div class="markdown">
      ## u-datalist

      Some more text
    </div>
    <div class="demo">
      <label>
        Search here
        <input type="text" list="datalist-1" />
      </label>
      <u-datalist id="datalist-1">
        <u-option>Option 1</u-option>
        <u-option>Option 2</u-option>
        <u-option>Option 3</u-option>
      </u-datalist>
    </div>
  </main>
  <script type="module">
    import { marked } from './marked.esm.js';
    import hljs from './highlight.min.js';

    function undent(el) {
      const indent = String(el.textContent.replace(/^\n+/, '').match(/^\s+/) || '')
      return el.textContent.trim().replace(new RegExp(`\\n${indent}`, 'g'), '\n')
    }

    document.querySelectorAll('.markdown').forEach((el) => {
      el.innerHTML = marked.parse(undent(el), { gfm: true })
      el.classList.remove('markdown')
    });

    document.querySelectorAll('.demo').forEach((el) => {
      el.insertAdjacentHTML('afterend', `<u-details><u-summary>View source</u-summary><details><pre><code class="language-html"></code></details></u-details>`)
      el.nextElementSibling.querySelector('code').textContent = el.innerHTML;
    });

    document.querySelectorAll('pre code').forEach((el) => {
      el.textContent = undent(el)
      hljs.highlightElement(el)
    });
  </script>
</body>
</html>